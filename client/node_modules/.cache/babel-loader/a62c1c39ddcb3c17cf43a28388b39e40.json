{"ast":null,"code":"var _jsxFileName = \"/home/marcos/code/marcoscannabrava/covalue/client/src/app/Session/withEmailVerification.js\";\nimport React from 'react';\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\n\nconst needsEmailVerification = authUser => authUser && !authUser.emailVerified && authUser.providerData.map(provider => provider.providerId).includes('password');\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.onSendEmailVerification = () => {\n        this.props.firebase.doSendEmailVerification().then(() => this.setState({\n          isSent: true\n        }));\n      };\n\n      this.state = {\n        isSent: false\n      };\n    }\n\n    render() {\n      return /*#__PURE__*/React.createElement(AuthUserContext.Consumer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }\n      }, authUser => needsEmailVerification(authUser) ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 15\n        }\n      }, this.state.isSent ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 19\n        }\n      }, \"E-Mail confirmation sent: Check your E-Mails (Spam folder included) for a confirmation E-Mail. Refresh this page once you confirmed your E-Mail.\") : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 19\n        }\n      }, \"Verify your E-Mail: Check your E-Mails (Spam folder included) for a confirmation E-Mail or send another confirmation E-Mail.\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.onSendEmailVerification,\n        disabled: this.state.isSent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }\n      }, \"Send confirmation E-Mail\")) : /*#__PURE__*/React.createElement(Component, Object.assign({}, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }\n      })));\n    }\n\n  }\n\n  return withFirebase(WithEmailVerification);\n};\n\nexport default withEmailVerification;","map":{"version":3,"sources":["/home/marcos/code/marcoscannabrava/covalue/client/src/app/Session/withEmailVerification.js"],"names":["React","AuthUserContext","withFirebase","needsEmailVerification","authUser","emailVerified","providerData","map","provider","providerId","includes","withEmailVerification","Component","WithEmailVerification","constructor","props","onSendEmailVerification","firebase","doSendEmailVerification","then","setState","isSent","state","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,eAAP,MAA4B,WAA5B;AACA,SAASC,YAAT,QAA6B,aAA7B;;AAEA,MAAMC,sBAAsB,GAAGC,QAAQ,IACrCA,QAAQ,IACR,CAACA,QAAQ,CAACC,aADV,IAEAD,QAAQ,CAACE,YAAT,CACGC,GADH,CACOC,QAAQ,IAAIA,QAAQ,CAACC,UAD5B,EAEGC,QAFH,CAEY,UAFZ,CAHF;;AAOA,MAAMC,qBAAqB,GAAGC,SAAS,IAAI;AACzC,QAAMC,qBAAN,SAAoCb,KAAK,CAACY,SAA1C,CAAoD;AAClDE,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,YAAMA,KAAN;;AADiB,WAMnBC,uBANmB,GAMO,MAAM;AAC9B,aAAKD,KAAL,CAAWE,QAAX,CACGC,uBADH,GAEGC,IAFH,CAEQ,MAAM,KAAKC,QAAL,CAAc;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAd,CAFd;AAGD,OAVkB;;AAGjB,WAAKC,KAAL,GAAa;AAAED,QAAAA,MAAM,EAAE;AAAV,OAAb;AACD;;AAQDE,IAAAA,MAAM,GAAG;AACP,0BACE,oBAAC,eAAD,CAAiB,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGnB,QAAQ,IACPD,sBAAsB,CAACC,QAAD,CAAtB,gBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKkB,KAAL,CAAWD,MAAX,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4JADD,gBAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wIARJ,eAeE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,OAAO,EAAE,KAAKL,uBAFhB;AAGE,QAAA,QAAQ,EAAE,KAAKM,KAAL,CAAWD,MAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAfF,CADF,gBAyBE,oBAAC,SAAD,oBAAe,KAAKN,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SA3BN,CADF;AAiCD;;AA/CiD;;AAkDpD,SAAOb,YAAY,CAACW,qBAAD,CAAnB;AACD,CApDD;;AAsDA,eAAeF,qBAAf","sourcesContent":["import React from 'react';\n\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\n\nconst needsEmailVerification = authUser =>\n  authUser &&\n  !authUser.emailVerified &&\n  authUser.providerData\n    .map(provider => provider.providerId)\n    .includes('password');\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = { isSent: false };\n    }\n\n    onSendEmailVerification = () => {\n      this.props.firebase\n        .doSendEmailVerification()\n        .then(() => this.setState({ isSent: true }));\n    };\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser =>\n            needsEmailVerification(authUser) ? (\n              <div>\n                {this.state.isSent ? (\n                  <p>\n                    E-Mail confirmation sent: Check your E-Mails (Spam\n                    folder included) for a confirmation E-Mail.\n                    Refresh this page once you confirmed your E-Mail.\n                  </p>\n                ) : (\n                  <p>\n                    Verify your E-Mail: Check your E-Mails (Spam folder\n                    included) for a confirmation E-Mail or send\n                    another confirmation E-Mail.\n                  </p>\n                )}\n\n                <button\n                  type=\"button\"\n                  onClick={this.onSendEmailVerification}\n                  disabled={this.state.isSent}\n                >\n                  Send confirmation E-Mail\n                </button>\n              </div>\n            ) : (\n              <Component {...this.props} />\n            )\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return withFirebase(WithEmailVerification);\n};\n\nexport default withEmailVerification;\n"]},"metadata":{},"sourceType":"module"}